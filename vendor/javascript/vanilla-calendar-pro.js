// vanilla-calendar-pro@3.0.4 downloaded from https://ga.jspm.io/npm:vanilla-calendar-pro@3.0.4/index.mjs

var l=Object.defineProperty,s=Object.defineProperties,c=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,__defNormalProp=(s,c,d)=>c in s?l(s,c,{enumerable:!0,configurable:!0,writable:!0,value:d}):s[c]=d,__spreadValues=(l,s)=>{for(var c in s||(s={}))u.call(s,c)&&__defNormalProp(l,c,s[c]);if(d)for(var c of d(s))m.call(s,c)&&__defNormalProp(l,c,s[c]);return l},__spreadProps=(l,d)=>s(l,c(d)),__publicField=(l,s,c)=>(__defNormalProp(l,"symbol"!=typeof s?s+"":s,c),c);const h={notFoundSelector:l=>`${l} is not found, check the first argument passed to new Calendar.`,notInit:'The calendar has not been initialized, please initialize it using the "init()" method first.',notLocale:"You specified an incorrect language label or did not specify the required number of values ​​for «locale.weekdays» or «locale.months».",incorrectTime:"The value of the time property can be: false, 12 or 24.",incorrectMonthsCount:"For the «multiple» calendar type, the «displayMonthsCount» parameter can have a value from 2 to 12, and for all others it cannot be greater than 1."},setContext=(l,s,c)=>{l.context[s]=c},destroy=l=>{var s,c,d,u,m;if(!l.context.isInit)throw new Error(h.notInit);l.inputMode?(null==(s=l.context.mainElement.parentElement)||s.removeChild(l.context.mainElement),null==(d=null==(c=l.context.inputElement)?void 0:c.replaceWith)||d.call(c,l.context.originalElement),setContext(l,"inputElement",void 0)):null==(m=(u=l.context.mainElement).replaceWith)||m.call(u,l.context.originalElement),setContext(l,"mainElement",l.context.originalElement),l.onDestroy&&l.onDestroy(l)},hide=l=>{l.context.isShowInInputMode&&l.context.currentType&&(l.context.mainElement.dataset.vcCalendarHidden="",setContext(l,"isShowInInputMode",!1),l.context.cleanupHandlers[0]&&(l.context.cleanupHandlers.forEach((l=>l())),setContext(l,"cleanupHandlers",[])),l.onHide&&l.onHide(l))};function getOffset(l){if(!l||!l.getBoundingClientRect)return{top:0,bottom:0,left:0,right:0};const s=l.getBoundingClientRect(),c=document.documentElement;return{bottom:s.bottom,right:s.right,top:s.top+window.scrollY-c.clientTop,left:s.left+window.scrollX-c.clientLeft}}function getViewportDimensions(){return{vw:Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),vh:Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)}}function getWindowScrollPosition(){return{left:window.scrollX||document.documentElement.scrollLeft||0,top:window.scrollY||document.documentElement.scrollTop||0}}function calculateAvailableSpace(l){const{top:s,left:c}=getWindowScrollPosition(),{top:d,left:u}=getOffset(l),{vh:m,vw:h}=getViewportDimensions(),v=d-s,p=u-c;return{top:v,bottom:m-(v+l.clientHeight),left:p,right:h-(p+l.clientWidth)}}function getAvailablePosition(l,s,c=5){const d={top:!0,bottom:!0,left:!0,right:!0},u=[];if(!s||!l)return{canShow:d,parentPositions:u};const{bottom:m,top:h}=calculateAvailableSpace(l),{top:v,left:p}=getOffset(l),{height:y,width:g}=s.getBoundingClientRect(),{vh:x,vw:b}=getViewportDimensions(),M=b/2,f=x/2;return[{condition:v<f,position:"top"},{condition:v>f,position:"bottom"},{condition:p<M,position:"left"},{condition:p>M,position:"right"}].forEach((({condition:l,position:s})=>{l&&u.push(s)})),Object.assign(d,{top:y<=h-c,bottom:y<=m-c,left:g<=p,right:g<=b-p}),{canShow:d,parentPositions:u}}const handleDay=(l,s,c,d)=>{var u;const m=d.querySelector(`[data-vc-date="${s}"]`),h=null==m?void 0:m.querySelector("[data-vc-date-btn]");if(!m||!h)return;if((null==c?void 0:c.modifier)&&h.classList.add(...c.modifier.trim().split(" ")),!(null==c?void 0:c.html))return;const v=document.createElement("div");v.className=l.styles.datePopup,v.dataset.vcDatePopup="",v.innerHTML=l.sanitizerHTML(c.html),h.ariaExpanded="true",h.ariaLabel=`${h.ariaLabel}, ${null==(u=null==v?void 0:v.textContent)?void 0:u.replace(/^\s+|\s+(?=\s)|\s+$/g,"").replace(/&nbsp;/g," ")}`,m.appendChild(v),requestAnimationFrame((()=>{if(!v)return;const{canShow:l}=getAvailablePosition(m,v),s=l.bottom?m.offsetHeight:-v.offsetHeight,c=l.left&&!l.right?m.offsetWidth-v.offsetWidth/2:!l.left&&l.right?v.offsetWidth/2:0;Object.assign(v.style,{left:`${c}px`,top:`${s}px`})}))},createDatePopup=(l,s)=>{var c;l.popups&&(null==(c=Object.entries(l.popups))||c.forEach((([c,d])=>handleDay(l,c,d,s))))},getDate=l=>new Date(`${l}T00:00:00`),getDateString=l=>`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}-${String(l.getDate()).padStart(2,"0")}`,parseDates=l=>l.reduce(((l,s)=>{if(s instanceof Date||"number"==typeof s){const c=s instanceof Date?s:new Date(s);l.push(c.toISOString().substring(0,10))}else s.match(/^(\d{4}-\d{2}-\d{2})$/g)?l.push(s):s.replace(/(\d{4}-\d{2}-\d{2}).*?(\d{4}-\d{2}-\d{2})/g,((s,c,d)=>{const u=getDate(c),m=getDate(d),h=new Date(u.getTime());for(;h<=m;h.setDate(h.getDate()+1))l.push(getDateString(h));return s}));return l}),[]),updateAttribute=(l,s,c,d="")=>{s?l.setAttribute(c,d):l.getAttribute(c)===d&&l.removeAttribute(c)},setDateModifier=(l,s,c,d,u,m,h)=>{var v,p,y,g;const x=getDate(l.context.displayDateMin)>getDate(m)||getDate(l.context.displayDateMax)<getDate(m)||(null==(v=l.context.disableDates)?void 0:v.includes(m))||!l.selectionMonthsMode&&"current"!==h||!l.selectionYearsMode&&getDate(m).getFullYear()!==s;updateAttribute(c,x,"data-vc-date-disabled"),d&&updateAttribute(d,x,"aria-disabled","true"),d&&updateAttribute(d,x,"tabindex","-1"),updateAttribute(c,!l.disableToday&&l.context.dateToday===m,"data-vc-date-today"),updateAttribute(c,!l.disableToday&&l.context.dateToday===m,"aria-current","date"),updateAttribute(c,null==(p=l.selectedWeekends)?void 0:p.includes(u),"data-vc-date-weekend");const b=(null==(y=l.selectedHolidays)?void 0:y[0])?parseDates(l.selectedHolidays):[];if(updateAttribute(c,b.includes(m),"data-vc-date-holiday"),(null==(g=l.context.selectedDates)?void 0:g.includes(m))?(c.setAttribute("data-vc-date-selected",""),d&&d.setAttribute("aria-selected","true"),l.context.selectedDates.length>1&&"multiple-ranged"===l.selectionDatesMode&&(l.context.selectedDates[0]===m&&l.context.selectedDates[l.context.selectedDates.length-1]===m?c.setAttribute("data-vc-date-selected","first-and-last"):l.context.selectedDates[0]===m?c.setAttribute("data-vc-date-selected","first"):l.context.selectedDates[l.context.selectedDates.length-1]===m&&c.setAttribute("data-vc-date-selected","last"),l.context.selectedDates[0]!==m&&l.context.selectedDates[l.context.selectedDates.length-1]!==m&&c.setAttribute("data-vc-date-selected","middle"))):c.hasAttribute("data-vc-date-selected")&&(c.removeAttribute("data-vc-date-selected"),d&&d.removeAttribute("aria-selected")),!l.context.disableDates.includes(m)&&l.enableEdgeDatesOnly&&l.context.selectedDates.length>1&&"multiple-ranged"===l.selectionDatesMode){const s=getDate(l.context.selectedDates[0]),d=getDate(l.context.selectedDates[l.context.selectedDates.length-1]),u=getDate(m);updateAttribute(c,u>s&&u<d,"data-vc-date-selected","middle")}},getLocaleString=(l,s,c)=>new Date(`${l}T00:00:00.000Z`).toLocaleString(s,c),getWeekNumber=(l,s)=>{const c=getDate(l),d=(c.getDay()-s+7)%7;c.setDate(c.getDate()+4-d);const u=new Date(c.getFullYear(),0,1),m=Math.ceil(((+c-+u)/864e5+1)/7);return{year:c.getFullYear(),week:m}},addWeekNumberForDate=(l,s,c)=>{const d=getWeekNumber(c,l.firstWeekday);d&&(s.dataset.vcDateWeekNumber=String(d.week))},setDaysAsDisabled=(l,s,c)=>{var d,u,m,h,v;const p=null==(d=l.disableWeekdays)?void 0:d.includes(c),y=l.disableAllDates&&!!(null==(u=l.context.enableDates)?void 0:u[0]);!p&&!y||(null==(m=l.context.enableDates)?void 0:m.includes(s))||(null==(h=l.context.disableDates)?void 0:h.includes(s))||(l.context.disableDates.push(s),null==(v=l.context.disableDates)||v.sort(((l,s)=>+new Date(l)-+new Date(s))))},createDate=(l,s,c,d,u,m)=>{const h=getDate(u).getDay(),v="string"==typeof l.locale&&l.locale.length?l.locale:"en",p=document.createElement("div");let y;p.className=l.styles.date,p.dataset.vcDate=u,p.dataset.vcDateMonth=m,p.dataset.vcDateWeekDay=String(h),("current"===m||l.displayDatesOutside)&&(y=document.createElement("button"),y.className=l.styles.dateBtn,y.type="button",y.role="gridcell",y.ariaLabel=getLocaleString(u,v,{dateStyle:"long",timeZone:"UTC"}),y.dataset.vcDateBtn="",y.innerText=String(d),p.appendChild(y)),l.enableWeekNumbers&&addWeekNumberForDate(l,p,u),setDaysAsDisabled(l,u,h),setDateModifier(l,s,p,y,h,u,m),c.appendChild(p),l.onCreateDateEls&&l.onCreateDateEls(l,p)},createDatesFromCurrentMonth=(l,s,c,d,u)=>{for(let m=1;m<=c;m++){const c=new Date(d,u,m);createDate(l,d,s,m,getDateString(c),"current")}},createDatesFromNextMonth=(l,s,c,d,u,m)=>{const h=m+c,v=7*Math.ceil(h/7)-h,p=u+1===12?d+1:d,y=u+1===12?"01":u+2<10?`0${u+2}`:u+2;for(let c=1;c<=v;c++){const u=c<10?`0${c}`:String(c);createDate(l,d,s,c,`${p}-${y}-${u}`,"next")}},createDatesFromPrevMonth=(l,s,c,d,u)=>{let m=new Date(c,d,0).getDate()-(u-1);const h=0===d?c-1:c,v=0===d?12:d<10?`0${d}`:d;for(let d=u;d>0;d--,m++)createDate(l,c,s,m,`${h}-${v}-${m}`,"prev")},createWeekNumbers=(l,s,c,d,u)=>{if(!l.enableWeekNumbers)return;d.textContent="";const m=document.createElement("b");m.className=l.styles.weekNumbersTitle,m.innerText="#",m.dataset.vcWeekNumbers="title",d.appendChild(m);const h=document.createElement("div");h.className=l.styles.weekNumbersContent,h.dataset.vcWeekNumbers="content",d.appendChild(h);const v=document.createElement("button");v.type="button",v.className=l.styles.weekNumber;const p=u.querySelectorAll("[data-vc-date]"),y=Math.ceil((s+c)/7);for(let s=0;s<y;s++){const c=p[0===s?6:7*s].dataset.vcDate,d=getWeekNumber(c,l.firstWeekday);if(!d)return;const u=v.cloneNode(!0);u.innerText=String(d.week),u.dataset.vcWeekNumber=String(d.week),u.dataset.vcWeekYear=String(d.year),u.role="rowheader",u.ariaLabel=`${d.week}`,h.appendChild(u)}},createDates=l=>{const s=new Date(l.context.selectedYear,l.context.selectedMonth,1),c=l.context.mainElement.querySelectorAll('[data-vc="dates"]'),d=l.context.mainElement.querySelectorAll('[data-vc-week="numbers"]');c.forEach(((c,u)=>{l.selectionDatesMode||(c.dataset.vcDatesDisabled=""),c.textContent="";const m=new Date(s);m.setMonth(m.getMonth()+u);const h=m.getMonth(),v=m.getFullYear(),p=(new Date(v,h,1).getDay()-l.firstWeekday+7)%7,y=new Date(v,h+1,0).getDate();createDatesFromPrevMonth(l,c,v,h,p),createDatesFromCurrentMonth(l,c,y,v,h),createDatesFromNextMonth(l,c,y,v,h,p),createDatePopup(l,c),createWeekNumbers(l,p,y,d[u],c)}))},layoutDefault=l=>`\n  <div class="${l.styles.header}" data-vc="header" role="toolbar" aria-label="${l.labels.navigation}">\n    <#ArrowPrev [month] />\n    <div class="${l.styles.headerContent}" data-vc-header="content">\n      <#Month />\n      <#Year />\n    </div>\n    <#ArrowNext [month] />\n  </div>\n  <div class="${l.styles.wrapper}" data-vc="wrapper">\n    <#WeekNumbers />\n    <div class="${l.styles.content}" data-vc="content">\n      <#Week />\n      <#Dates />\n      <#DateRangeTooltip />\n    </div>\n  </div>\n  <#ControlTime />\n`,layoutMonths=l=>`\n  <div class="${l.styles.header}" data-vc="header" role="toolbar" aria-label="${l.labels.navigation}">\n    <div class="${l.styles.headerContent}" data-vc-header="content">\n      <#Month />\n      <#Year />\n    </div>\n  </div>\n  <div class="${l.styles.wrapper}" data-vc="wrapper">\n    <div class="${l.styles.content}" data-vc="content">\n      <#Months />\n    </div>\n  </div>\n`,layoutMultiple=l=>`\n  <div class="${l.styles.controls}" data-vc="controls" role="toolbar" aria-label="${l.labels.navigation}">\n    <#ArrowPrev [month] />\n    <#ArrowNext [month] />\n  </div>\n  <div class="${l.styles.grid}" data-vc="grid">\n    <#Multiple>\n      <div class="${l.styles.column}" data-vc="column" role="region">\n        <div class="${l.styles.header}" data-vc="header">\n          <div class="${l.styles.headerContent}" data-vc-header="content">\n            <#Month />\n            <#Year />\n          </div>\n        </div>\n        <div class="${l.styles.wrapper}" data-vc="wrapper">\n          <#WeekNumbers />\n          <div class="${l.styles.content}" data-vc="content">\n            <#Week />\n            <#Dates />\n          </div>\n        </div>\n      </div>\n    <#/Multiple>\n    <#DateRangeTooltip />\n  </div>\n  <#ControlTime />\n`,layoutYears=l=>`\n  <div class="${l.styles.header}" data-vc="header" role="toolbar" aria-label="${l.labels.navigation}">\n    <#ArrowPrev [year] />\n    <div class="${l.styles.headerContent}" data-vc-header="content">\n      <#Month />\n      <#Year />\n    </div>\n    <#ArrowNext [year] />\n  </div>\n  <div class="${l.styles.wrapper}" data-vc="wrapper">\n    <div class="${l.styles.content}" data-vc="content">\n      <#Years />\n    </div>\n  </div>\n`,ArrowNext=(l,s)=>`<button type="button" class="${l.styles.arrowNext}" data-vc-arrow="next" aria-label="${l.labels.arrowNext[s]}"></button>`,ArrowPrev=(l,s)=>`<button type="button" class="${l.styles.arrowPrev}" data-vc-arrow="prev" aria-label="${l.labels.arrowPrev[s]}"></button>`,ControlTime=l=>l.selectionTimeMode?`<div class="${l.styles.time}" data-vc="time" role="group" aria-label="${l.labels.selectingTime}"></div>`:"",DateRangeTooltip=l=>l.onCreateDateRangeTooltip?`<div class="${l.styles.dateRangeTooltip}" data-vc-date-range-tooltip="hidden"></div>`:"",Dates=l=>`<div class="${l.styles.dates}" data-vc="dates" role="grid" aria-live="assertive" aria-label="${l.labels.dates}" ${"multiple"===l.type?"aria-multiselectable":""}></div>`,Month=l=>`<button type="button" class="${l.styles.month}" data-vc="month"></button>`,Months=l=>`<div class="${l.styles.months}" data-vc="months" role="grid" aria-live="assertive" aria-label="${l.labels.months}"></div>`,Week=l=>`<div class="${l.styles.week}" data-vc="week" role="row" aria-label="${l.labels.week}"></div>`,WeekNumbers=l=>l.enableWeekNumbers?`<div class="${l.styles.weekNumbers}" data-vc-week="numbers" role="row" aria-label="${l.labels.weekNumber}"></div>`:"",Year=l=>`<button type="button" class="${l.styles.year}" data-vc="year"></button>`,Years=l=>`<div class="${l.styles.years}" data-vc="years" role="grid" aria-live="assertive" aria-label="${l.labels.years}"></div>`,v={ArrowNext:ArrowNext,ArrowPrev:ArrowPrev,ControlTime:ControlTime,Dates:Dates,DateRangeTooltip:DateRangeTooltip,Month:Month,Months:Months,Week:Week,WeekNumbers:WeekNumbers,Year:Year,Years:Years},getComponent=l=>v[l],parseLayout=(l,s)=>s.replace(/[\n\t]/g,"").replace(/<#(?!\/?Multiple)(.*?)>/g,((s,c)=>{const d=(c.match(/\[(.*?)\]/)||[])[1],u=c.replace(/[/\s\n\t]|\[(.*?)\]/g,""),m=getComponent(u),h=m?m(l,null!=d?d:null):"";return l.sanitizerHTML(h)})).replace(/[\n\t]/g,""),parseMultipleLayout=(l,s)=>s.replace(new RegExp("<#Multiple>(.*?)<#\\/Multiple>","gs"),((s,c)=>{const d=Array(l.context.displayMonthsCount).fill(c).join("");return l.sanitizerHTML(d)})).replace(/[\n\t]/g,""),createLayouts=(l,s)=>{const c={default:layoutDefault,month:layoutMonths,year:layoutYears,multiple:layoutMultiple};if(Object.keys(c).forEach((s=>{const d=s;l.layouts[d].length||(l.layouts[d]=c[d](l))})),l.context.mainElement.className=l.styles.calendar,l.context.mainElement.dataset.vc="calendar",l.context.mainElement.dataset.vcType=l.context.currentType,l.context.mainElement.role="application",l.context.mainElement.tabIndex=0,l.context.mainElement.ariaLabel=l.labels.application,"multiple"!==l.context.currentType){if("multiple"===l.type&&s){const c=l.context.mainElement.querySelector('[data-vc="controls"]'),d=l.context.mainElement.querySelector('[data-vc="grid"]'),u=s.closest('[data-vc="column"]');return c&&l.context.mainElement.removeChild(c),d&&(d.dataset.vcGrid="hidden"),u&&(u.dataset.vcColumn=l.context.currentType),void(u&&(u.innerHTML=l.sanitizerHTML(parseLayout(l,l.layouts[l.context.currentType]))))}l.context.mainElement.innerHTML=l.sanitizerHTML(parseLayout(l,l.layouts[l.context.currentType]))}else l.context.mainElement.innerHTML=l.sanitizerHTML(parseMultipleLayout(l,parseLayout(l,l.layouts[l.context.currentType])))},setVisibilityArrows=(l,s,c,d)=>{l.style.visibility=c?"hidden":"",s.style.visibility=d?"hidden":""},handleDefaultType=(l,s,c)=>{const d=getDate(getDateString(new Date(l.context.selectedYear,l.context.selectedMonth,1))),u=new Date(d.getTime()),m=new Date(d.getTime());u.setMonth(u.getMonth()-l.monthsToSwitch),m.setMonth(m.getMonth()+l.monthsToSwitch);const h=getDate(l.context.dateMin),v=getDate(l.context.dateMax);l.selectionYearsMode||(h.setFullYear(d.getFullYear()),v.setFullYear(d.getFullYear()));const p=!l.selectionMonthsMode||u.getFullYear()<h.getFullYear()||u.getFullYear()===h.getFullYear()&&u.getMonth()<h.getMonth(),y=!l.selectionMonthsMode||m.getFullYear()>v.getFullYear()||m.getFullYear()===v.getFullYear()&&m.getMonth()>v.getMonth()-(l.context.displayMonthsCount-1);setVisibilityArrows(s,c,p,y)},handleYearType=(l,s,c)=>{const d=getDate(l.context.dateMin),u=getDate(l.context.dateMax),m=!!(d.getFullYear()&&l.context.displayYear-7<=d.getFullYear()),h=!!(u.getFullYear()&&l.context.displayYear+7>=u.getFullYear());setVisibilityArrows(s,c,m,h)},visibilityArrows=l=>{if("month"===l.context.currentType)return;const s=l.context.mainElement.querySelector('[data-vc-arrow="prev"]'),c=l.context.mainElement.querySelector('[data-vc-arrow="next"]');s&&c&&{default:()=>handleDefaultType(l,s,c),year:()=>handleYearType(l,s,c)}["multiple"===l.context.currentType?"default":l.context.currentType]()},visibilityHandler=(l,s,c,d,u)=>{const m=new Date(d.setFullYear(l.context.selectedYear,l.context.selectedMonth+c)).getFullYear(),h=new Date(d.setMonth(l.context.selectedMonth+c)).getMonth(),v=l.context.locale.months.long[h],p=s.closest('[data-vc="column"]');p&&(p.ariaLabel=`${v} ${m}`);const y={month:{id:h,label:v},year:{id:m,label:m}};s.innerText=String(y[u].label),s.dataset[`vc${u.charAt(0).toUpperCase()+u.slice(1)}`]=String(y[u].id),s.ariaLabel=`${l.labels[u]} ${y[u].label}`;const g={month:l.selectionMonthsMode,year:l.selectionYearsMode},x=!1===g[u]||"only-arrows"===g[u];x&&(s.tabIndex=-1),s.disabled=x},visibilityTitle=l=>{const s=l.context.mainElement.querySelectorAll('[data-vc="month"]'),c=l.context.mainElement.querySelectorAll('[data-vc="year"]'),d=new Date(l.context.selectedYear,l.context.selectedMonth,1);[s,c].forEach((s=>null==s?void 0:s.forEach(((s,c)=>visibilityHandler(l,s,c,d,s.dataset.vc)))))},setYearModifier=(l,s,c,d,u)=>{var m;const h={month:"[data-vc-months-month]",year:"[data-vc-years-year]"},v={month:{selected:"data-vc-months-month-selected",aria:"aria-selected",value:"vcMonthsMonth",selectedProperty:"selectedMonth"},year:{selected:"data-vc-years-year-selected",aria:"aria-selected",value:"vcYearsYear",selectedProperty:"selectedYear"}};u&&(null==(m=l.context.mainElement.querySelectorAll(h[c]))||m.forEach((l=>{l.removeAttribute(v[c].selected),l.removeAttribute(v[c].aria)})),setContext(l,v[c].selectedProperty,Number(s.dataset[v[c].value])),visibilityTitle(l),"year"===c&&visibilityArrows(l)),d&&(s.setAttribute(v[c].selected,""),s.setAttribute(v[c].aria,"true"))},getColumnID=(l,s)=>{var c;if("multiple"!==l.type)return{currentValue:null,columnID:0};const d=l.context.mainElement.querySelectorAll('[data-vc="column"]'),u=Array.from(d).findIndex((l=>l.closest(`[data-vc-column="${s}"]`)));return{currentValue:u>=0?Number(null==(c=d[u].querySelector(`[data-vc="${s}"]`))?void 0:c.getAttribute(`data-vc-${s}`)):null,columnID:Math.max(u,0)}},createMonthEl=(l,s,c,d,u,m,h)=>{const v=s.cloneNode(!1);return v.className=l.styles.monthsMonth,v.innerText=d,v.ariaLabel=u,v.role="gridcell",v.dataset.vcMonthsMonth=`${h}`,m&&(v.ariaDisabled="true"),m&&(v.tabIndex=-1),v.disabled=m,setYearModifier(l,v,"month",c===h,!1),v},createMonths=(l,s)=>{var c,d;const u=null==(c=null==s?void 0:s.closest('[data-vc="header"]'))?void 0:c.querySelector('[data-vc="year"]'),m=u?Number(u.dataset.vcYear):l.context.selectedYear,h=(null==s?void 0:s.dataset.vcMonth)?Number(s.dataset.vcMonth):l.context.selectedMonth;setContext(l,"currentType","month"),createLayouts(l,s),visibilityTitle(l);const v=l.context.mainElement.querySelector('[data-vc="months"]');if(!l.selectionMonthsMode||!v)return;const p=l.monthsToSwitch>1?l.context.locale.months.long.map(((s,c)=>h-l.monthsToSwitch*c)).concat(l.context.locale.months.long.map(((s,c)=>h+l.monthsToSwitch*c))).filter((l=>l>=0&&l<=12)):Array.from(Array(12).keys()),y=document.createElement("button");y.type="button";for(let s=0;s<12;s++){const c=getDate(l.context.dateMin),d=getDate(l.context.dateMax),u=l.context.displayMonthsCount-1,{columnID:g}=getColumnID(l,"month"),x=m<=c.getFullYear()&&s<c.getMonth()+g||m>=d.getFullYear()&&s>d.getMonth()-u+g||m>d.getFullYear()||s!==h&&!p.includes(s),b=createMonthEl(l,y,h,l.context.locale.months.short[s],l.context.locale.months.long[s],x,s);v.appendChild(b),l.onCreateMonthEls&&l.onCreateMonthEls(l,b)}null==(d=l.context.mainElement.querySelector("[data-vc-months-month]:not([disabled])"))||d.focus()},TimeInput=(l,s,c,d,u)=>`\n  <label class="${s}" data-vc-time-input="${l}">\n    <input type="text" name="${l}" maxlength="2" aria-label="${c[`input${l.charAt(0).toUpperCase()+l.slice(1)}`]}" value="${d}" ${u?"disabled":""}>\n  </label>\n`,TimeRange=(l,s,c,d,u,m,h)=>`\n  <label class="${s}" data-vc-time-range="${l}">\n    <input type="range" name="${l}" min="${d}" max="${u}" step="${m}" aria-label="${c[`range${l.charAt(0).toUpperCase()+l.slice(1)}`]}" value="${h}">\n  </label>\n`,handleActions=(l,s,c,d)=>{({hour:()=>setContext(l,"selectedHours",c),minute:()=>setContext(l,"selectedMinutes",c)})[d](),setContext(l,"selectedTime",`${l.context.selectedHours}:${l.context.selectedMinutes}${l.context.selectedKeeping?` ${l.context.selectedKeeping}`:""}`),l.onChangeTime&&l.onChangeTime(l,s,!1),l.inputMode&&l.context.inputElement&&l.context.mainElement&&l.onChangeToInput&&l.onChangeToInput(l,s)},transformTime24=(l,s)=>{var c;return(null==(c={0:{AM:"00",PM:"12"},1:{AM:"01",PM:"13"},2:{AM:"02",PM:"14"},3:{AM:"03",PM:"15"},4:{AM:"04",PM:"16"},5:{AM:"05",PM:"17"},6:{AM:"06",PM:"18"},7:{AM:"07",PM:"19"},8:{AM:"08",PM:"20"},9:{AM:"09",PM:"21"},10:{AM:"10",PM:"22"},11:{AM:"11",PM:"23"},12:{AM:"00",PM:"12"}}[Number(l)])?void 0:c[s])||String(l)},handleClickKeepingTime=(l,s,c,d,u)=>{const o=m=>{const h="AM"===l.context.selectedKeeping?"PM":"AM",v=transformTime24(l.context.selectedHours,h);Number(v)<=d&&Number(v)>=u?(setContext(l,"selectedKeeping",h),c.value=v,handleActions(l,m,l.context.selectedHours,"hour"),s.ariaLabel=`${l.labels.btnKeeping} ${l.context.selectedKeeping}`,s.innerText=l.context.selectedKeeping):l.onChangeTime&&l.onChangeTime(l,m,!0)};return s.addEventListener("click",o),()=>{s.removeEventListener("click",o)}},transformTime12=l=>({0:"12",13:"01",14:"02",15:"03",16:"04",17:"05",18:"06",19:"07",20:"08",21:"09",22:"10",23:"11"}[Number(l)]||String(l)),updateInputAndRange=(l,s,c,d)=>{l.value=c,s.value=d},updateKeepingTime$1=(l,s,c)=>{s&&c&&(setContext(l,"selectedKeeping",c),s.innerText=c)},handleInput$1=(l,s,c,d,u,m,h)=>{const v={hour:(v,p,y)=>{l.selectionTimeMode&&{12:()=>{if(!l.context.selectedKeeping)return;const g=Number(transformTime24(p,l.context.selectedKeeping));if(!(g<=m&&g>=h))return updateInputAndRange(c,s,l.context.selectedHours,l.context.selectedHours),void(l.onChangeTime&&l.onChangeTime(l,y,!0));updateInputAndRange(c,s,transformTime12(p),transformTime24(p,l.context.selectedKeeping)),v>12&&updateKeepingTime$1(l,d,"PM"),handleActions(l,y,transformTime12(p),u)},24:()=>{if(!(v<=m&&v>=h))return updateInputAndRange(c,s,l.context.selectedHours,l.context.selectedHours),void(l.onChangeTime&&l.onChangeTime(l,y,!0));updateInputAndRange(c,s,p,p),handleActions(l,y,p,u)}}[l.selectionTimeMode]()},minute:(d,v,p)=>{if(!(d<=m&&d>=h))return c.value=l.context.selectedMinutes,void(l.onChangeTime&&l.onChangeTime(l,p,!0));c.value=v,s.value=v,handleActions(l,p,v,u)}},r=l=>{const s=Number(c.value),d=c.value.padStart(2,"0");v[u]&&v[u](s,d,l)};return c.addEventListener("change",r),()=>{c.removeEventListener("change",r)}},updateInputAndTime=(l,s,c,d,u)=>{s.value=u,handleActions(l,c,u,d)},updateKeepingTime=(l,s,c)=>{s&&(setContext(l,"selectedKeeping",c),s.innerText=c)},handleRange=(l,s,c,d,u)=>{const o=m=>{const h=Number(s.value),v=s.value.padStart(2,"0"),p="hour"===u,y=24===l.selectionTimeMode,g=h>0&&h<12;p&&!y&&updateKeepingTime(l,d,0===h||g?"AM":"PM"),updateInputAndTime(l,c,m,u,!p||y||g?v:transformTime12(s.value))};return s.addEventListener("input",o),()=>{s.removeEventListener("input",o)}},handleMouseOver=l=>l.setAttribute("data-vc-input-focus",""),handleMouseOut=l=>l.removeAttribute("data-vc-input-focus"),handleTime=(l,s)=>{const c=s.querySelector('[data-vc-time-range="hour"] input[name="hour"]'),d=s.querySelector('[data-vc-time-range="minute"] input[name="minute"]'),u=s.querySelector('[data-vc-time-input="hour"] input[name="hour"]'),m=s.querySelector('[data-vc-time-input="minute"] input[name="minute"]'),h=s.querySelector('[data-vc-time="keeping"]');if(!(c&&d&&u&&m))return;const i=l=>{l.target===c&&handleMouseOver(u),l.target===d&&handleMouseOver(m)},r=l=>{l.target===c&&handleMouseOut(u),l.target===d&&handleMouseOut(m)};return s.addEventListener("mouseover",i),s.addEventListener("mouseout",r),handleInput$1(l,c,u,h,"hour",l.timeMaxHour,l.timeMinHour),handleInput$1(l,d,m,h,"minute",l.timeMaxMinute,l.timeMinMinute),handleRange(l,c,u,h,"hour"),handleRange(l,d,m,h,"minute"),h&&handleClickKeepingTime(l,h,c,l.timeMaxHour,l.timeMinHour),()=>{s.removeEventListener("mouseover",i),s.removeEventListener("mouseout",r)}},createTime=l=>{const s=l.context.mainElement.querySelector('[data-vc="time"]');if(!l.selectionTimeMode||!s)return;const[c,d]=[l.timeMinHour,l.timeMaxHour],[u,m]=[l.timeMinMinute,l.timeMaxMinute],h=l.context.selectedKeeping?transformTime24(l.context.selectedHours,l.context.selectedKeeping):l.context.selectedHours,v="range"===l.timeControls;var p;s.innerHTML=l.sanitizerHTML(`\n    <div class="${l.styles.timeContent}" data-vc-time="content">\n      ${TimeInput("hour",l.styles.timeHour,l.labels,l.context.selectedHours,v)}\n      ${TimeInput("minute",l.styles.timeMinute,l.labels,l.context.selectedMinutes,v)}\n      ${12===l.selectionTimeMode?(p=l.context.selectedKeeping,`<button type="button" class="${l.styles.timeKeeping}" aria-label="${l.labels.btnKeeping} ${p}" data-vc-time="keeping" ${v?"disabled":""}>${p}</button>`):""}\n    </div>\n    <div class="${l.styles.timeRanges}" data-vc-time="ranges">\n      ${TimeRange("hour",l.styles.timeRange,l.labels,c,d,l.timeStepHour,h)}\n      ${TimeRange("minute",l.styles.timeRange,l.labels,u,m,l.timeStepMinute,l.context.selectedMinutes)}\n    </div>\n  `),handleTime(l,s)},createWeek=l=>{const s=l.selectedWeekends?[...l.selectedWeekends]:[],c=[...l.context.locale.weekdays.long].reduce(((c,d,u)=>[...c,{id:u,titleShort:l.context.locale.weekdays.short[u],titleLong:d,isWeekend:s.includes(u)}]),[]),d=[...c.slice(l.firstWeekday),...c.slice(0,l.firstWeekday)];l.context.mainElement.querySelectorAll('[data-vc="week"]').forEach((s=>{const c=l.onClickWeekDay?document.createElement("button"):document.createElement("b");l.onClickWeekDay&&(c.type="button"),d.forEach((d=>{const u=c.cloneNode(!0);u.innerText=d.titleShort,u.className=l.styles.weekDay,u.role="columnheader",u.ariaLabel=d.titleLong,u.dataset.vcWeekDay=String(d.id),d.isWeekend&&(u.dataset.vcWeekDayOff=""),s.appendChild(u)}))}))},createYearEl=(l,s,c,d,u)=>{const m=s.cloneNode(!1);return m.className=l.styles.yearsYear,m.innerText=String(u),m.ariaLabel=String(u),m.role="gridcell",m.dataset.vcYearsYear=`${u}`,d&&(m.ariaDisabled="true"),d&&(m.tabIndex=-1),m.disabled=d,setYearModifier(l,m,"year",c===u,!1),m},createYears=(l,s)=>{var c;const d=(null==s?void 0:s.dataset.vcYear)?Number(s.dataset.vcYear):l.context.selectedYear;setContext(l,"currentType","year"),createLayouts(l,s),visibilityTitle(l),visibilityArrows(l);const u=l.context.mainElement.querySelector('[data-vc="years"]');if(!l.selectionYearsMode||!u)return;const m="multiple"!==l.type||l.context.selectedYear===d?0:1,h=document.createElement("button");h.type="button";for(let s=l.context.displayYear-7;s<l.context.displayYear+8;s++){const c=s<getDate(l.context.dateMin).getFullYear()+m||s>getDate(l.context.dateMax).getFullYear(),v=createYearEl(l,h,d,c,s);u.appendChild(v),l.onCreateYearEls&&l.onCreateYearEls(l,v)}null==(c=l.context.mainElement.querySelector("[data-vc-years-year]:not([disabled])"))||c.focus()},trackChangesHTMLElement=(l,s,c)=>{new MutationObserver((l=>{for(let d=0;d<l.length;d++)if(l[d].attributeName===s){c();break}})).observe(l,{attributes:!0})},p={value:!1,set:()=>p.value=!0,check:()=>p.value},setTheme=(l,s)=>l.dataset.vcTheme=s,trackChangesThemeInSystemSettings=(l,s)=>{if(setTheme(l.context.mainElement,s.matches?"dark":"light"),"system"!==l.selectedTheme||p.check())return;const n=l=>{const s=document.querySelectorAll('[data-vc="calendar"]');null==s||s.forEach((s=>setTheme(s,l.matches?"dark":"light")))};s.addEventListener?s.addEventListener("change",n):s.addListener(n),p.set()},detectTheme=(l,s)=>{const c=l.themeAttrDetect.length?document.querySelector(l.themeAttrDetect):null,d=l.themeAttrDetect.replace(/^.*\[(.+)\]/g,((l,s)=>s));if(!c||"system"===c.getAttribute(d))return void trackChangesThemeInSystemSettings(l,s);const u=c.getAttribute(d);u?(setTheme(l.context.mainElement,u),trackChangesHTMLElement(c,d,(()=>{const s=c.getAttribute(d);s&&setTheme(l.context.mainElement,s)}))):trackChangesThemeInSystemSettings(l,s)},handleTheme=l=>{"not all"!==window.matchMedia("(prefers-color-scheme)").media?"system"===l.selectedTheme?detectTheme(l,window.matchMedia("(prefers-color-scheme: dark)")):setTheme(l.context.mainElement,l.selectedTheme):setTheme(l.context.mainElement,"light")},capitalizeFirstLetter=l=>l.charAt(0).toUpperCase()+l.slice(1).replace(/\./,""),getLocaleWeekday=(l,s,c)=>{const d=new Date(`1978-01-0${s+1}T00:00:00.000Z`),u=d.toLocaleString(c,{weekday:"short",timeZone:"UTC"}),m=d.toLocaleString(c,{weekday:"long",timeZone:"UTC"});l.context.locale.weekdays.short.push(capitalizeFirstLetter(u)),l.context.locale.weekdays.long.push(capitalizeFirstLetter(m))},getLocaleMonth=(l,s,c)=>{const d=new Date(`1978-${String(s+1).padStart(2,"0")}-01T00:00:00.000Z`),u=d.toLocaleString(c,{month:"short",timeZone:"UTC"}),m=d.toLocaleString(c,{month:"long",timeZone:"UTC"});l.context.locale.months.short.push(capitalizeFirstLetter(u)),l.context.locale.months.long.push(capitalizeFirstLetter(m))},getLocale=l=>{var s,c,d,u,m,v,p,y;if(!(l.context.locale.weekdays.short[6]&&l.context.locale.weekdays.long[6]&&l.context.locale.months.short[11]&&l.context.locale.months.long[11]))if("string"==typeof l.locale){if("string"==typeof l.locale&&!l.locale.length)throw new Error(h.notLocale);Array.from({length:7},((s,c)=>getLocaleWeekday(l,c,l.locale))),Array.from({length:12},((s,c)=>getLocaleMonth(l,c,l.locale)))}else{if(!((null==(c=null==(s=l.locale)?void 0:s.weekdays)?void 0:c.short[6])&&(null==(u=null==(d=l.locale)?void 0:d.weekdays)?void 0:u.long[6])&&(null==(v=null==(m=l.locale)?void 0:m.months)?void 0:v.short[11])&&(null==(y=null==(p=l.locale)?void 0:p.months)?void 0:y.long[11])))throw new Error(h.notLocale);setContext(l,"locale",__spreadValues({},l.locale))}},create=l=>{const s={default:()=>{createWeek(l),createDates(l)},multiple:()=>{createWeek(l),createDates(l)},month:()=>createMonths(l),year:()=>createYears(l)};handleTheme(l),getLocale(l),createLayouts(l),visibilityTitle(l),visibilityArrows(l),createTime(l),s[l.context.currentType]()},handleArrowKeys=l=>{const t=s=>{var c;const d=s.target;if(!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(s.key)||"button"!==d.localName)return;const u=Array.from(l.context.mainElement.querySelectorAll('[data-vc="calendar"] button')),m=u.indexOf(d);if(-1===m)return;const h=(v=u[m]).hasAttribute("data-vc-date-btn")?7:v.hasAttribute("data-vc-months-month")?4:v.hasAttribute("data-vc-years-year")?5:1;var v;const p=(0,{ArrowUp:()=>Math.max(0,m-h),ArrowDown:()=>Math.min(u.length-1,m+h),ArrowLeft:()=>Math.max(0,m-1),ArrowRight:()=>Math.min(u.length-1,m+1)}[s.key])();null==(c=u[p])||c.focus()};return l.context.mainElement.addEventListener("keydown",t),()=>l.context.mainElement.removeEventListener("keydown",t)},handleMonth=(l,s)=>{const c=getDate(getDateString(new Date(l.context.selectedYear,l.context.selectedMonth,1)));({prev:()=>c.setMonth(c.getMonth()-l.monthsToSwitch),next:()=>c.setMonth(c.getMonth()+l.monthsToSwitch)})[s](),setContext(l,"selectedMonth",c.getMonth()),setContext(l,"selectedYear",c.getFullYear()),visibilityTitle(l),visibilityArrows(l),createDates(l)},handleClickArrow=(l,s)=>{const c=s.target.closest("[data-vc-arrow]");if(c){if(["default","multiple"].includes(l.context.currentType))handleMonth(l,c.dataset.vcArrow);else if("year"===l.context.currentType&&void 0!==l.context.displayYear){const d={prev:-15,next:15}[c.dataset.vcArrow];setContext(l,"displayYear",l.context.displayYear+d),createYears(l,s.target)}l.onClickArrow&&l.onClickArrow(l,s)}},canToggleSelection=l=>void 0===l.enableDateToggle||("function"==typeof l.enableDateToggle?l.enableDateToggle(l):l.enableDateToggle),handleSelectDate=(l,s,c)=>{const d=s.dataset.vcDate,u=s.closest("[data-vc-date][data-vc-date-selected]"),m=canToggleSelection(l);if(u&&!m)return;const h=u?l.context.selectedDates.filter((l=>l!==d)):c?[...l.context.selectedDates,d]:[d];setContext(l,"selectedDates",h)},createDateRangeTooltip=(l,s,c)=>{if(!s)return;if(!c)return s.dataset.vcDateRangeTooltip="hidden",void(s.textContent="");const d=l.context.mainElement.getBoundingClientRect(),u=c.getBoundingClientRect();s.style.left=u.left-d.left+u.width/2+"px",s.style.top=u.bottom-d.top-u.height+"px",s.dataset.vcDateRangeTooltip="visible",s.innerHTML=l.sanitizerHTML(l.onCreateDateRangeTooltip(l,c,s,u,d))},y={self:null,lastDateEl:null,isHovering:!1,rangeMin:void 0,rangeMax:void 0,tooltipEl:null,timeoutId:null},addHoverEffect=(l,s,c)=>{var d,u,m;if(!(null==(u=null==(d=y.self)?void 0:d.context)?void 0:u.selectedDates[0]))return;const h=getDateString(l);(null==(m=y.self.context.disableDates)?void 0:m.includes(h))||(y.self.context.mainElement.querySelectorAll(`[data-vc-date="${h}"]`).forEach((l=>l.dataset.vcDateHover="")),s.forEach((l=>l.dataset.vcDateHover="first")),c.forEach((l=>{"first"===l.dataset.vcDateHover?l.dataset.vcDateHover="first-and-last":l.dataset.vcDateHover="last"})))},removeHoverEffect=()=>{var l,s;(null==(s=null==(l=y.self)?void 0:l.context)?void 0:s.mainElement)&&y.self.context.mainElement.querySelectorAll("[data-vc-date-hover]").forEach((l=>l.removeAttribute("data-vc-date-hover")))},handleHoverDatesEvent=l=>{var s,c;if(!l.target||!(null==(c=null==(s=y.self)?void 0:s.context)?void 0:c.selectedDates[0]))return;if(!l.target.closest('[data-vc="dates"]'))return y.lastDateEl=null,createDateRangeTooltip(y.self,y.tooltipEl,null),void removeHoverEffect();const d=l.target.closest("[data-vc-date]");if(!d||y.lastDateEl===d)return;y.lastDateEl=d,createDateRangeTooltip(y.self,y.tooltipEl,d),removeHoverEffect();const u=d.dataset.vcDate,m=getDate(y.self.context.selectedDates[0]),h=getDate(u),v=y.self.context.mainElement.querySelectorAll(`[data-vc-date="${y.self.context.selectedDates[0]}"]`),p=y.self.context.mainElement.querySelectorAll(`[data-vc-date="${u}"]`),[g,x]=m<h?[v,p]:[p,v],[b,M]=m<h?[m,h]:[h,m];for(let l=new Date(b);l<=M;l.setDate(l.getDate()+1))addHoverEffect(l,g,x)},handleHoverSelectedDatesRangeEvent=l=>{const s=l.target.closest("[data-vc-date-selected]");if(!s&&y.lastDateEl)return y.lastDateEl=null,void createDateRangeTooltip(y.self,y.tooltipEl,null);s&&y.lastDateEl!==s&&(y.lastDateEl=s,createDateRangeTooltip(y.self,y.tooltipEl,s))},optimizedHoverHandler=l=>s=>{y.isHovering||(y.isHovering=!0,requestAnimationFrame((()=>{l(s),y.isHovering=!1})))},g=optimizedHoverHandler(handleHoverDatesEvent),x=optimizedHoverHandler(handleHoverSelectedDatesRangeEvent),handleCancelSelectionDates=l=>{y.self&&"Escape"===l.key&&(y.lastDateEl=null,setContext(y.self,"selectedDates",[]),y.self.context.mainElement.removeEventListener("mousemove",g),y.self.context.mainElement.removeEventListener("keydown",handleCancelSelectionDates),createDateRangeTooltip(y.self,y.tooltipEl,null),removeHoverEffect())},handleMouseLeave=()=>{null!==y.timeoutId&&clearTimeout(y.timeoutId),y.timeoutId=setTimeout((()=>{y.lastDateEl=null,createDateRangeTooltip(y.self,y.tooltipEl,null),removeHoverEffect()}),50)},updateDisabledDates=()=>{var l,s,c,d;if(!(null==(c=null==(s=null==(l=y.self)?void 0:l.context)?void 0:s.selectedDates)?void 0:c[0])||!(null==(d=y.self.context.disableDates)?void 0:d[0]))return;const u=getDate(y.self.context.selectedDates[0]),[m,h]=y.self.context.disableDates.map((l=>getDate(l))).reduce((([l,s],c)=>[u>=c?c:l,u<c&&null===s?c:s]),[null,null]);m&&setContext(y.self,"displayDateMin",getDateString(new Date(m.setDate(m.getDate()+1)))),h&&setContext(y.self,"displayDateMax",getDateString(new Date(h.setDate(h.getDate()-1))));y.self.disableDatesPast&&!y.self.disableAllDates&&getDate(y.self.context.displayDateMin)<getDate(y.self.context.dateToday)&&setContext(y.self,"displayDateMin",y.self.context.dateToday)},handleSelectDateRange=(l,s)=>{y.self=l,y.lastDateEl=s,removeHoverEffect(),l.disableDatesGaps&&(y.rangeMin=y.rangeMin?y.rangeMin:l.context.displayDateMin,y.rangeMax=y.rangeMax?y.rangeMax:l.context.displayDateMax),l.onCreateDateRangeTooltip&&(y.tooltipEl=l.context.mainElement.querySelector("[data-vc-date-range-tooltip]"));const c=null==s?void 0:s.dataset.vcDate;if(c){const s=1===l.context.selectedDates.length&&l.context.selectedDates[0].includes(c),d=s&&!canToggleSelection(l)?[c,c]:s&&canToggleSelection(l)?[]:l.context.selectedDates.length>1?[c]:[...l.context.selectedDates,c];setContext(l,"selectedDates",d),l.context.selectedDates.length>1&&l.context.selectedDates.sort(((l,s)=>+new Date(l)-+new Date(s)))}({set:()=>(l.disableDatesGaps&&updateDisabledDates(),createDateRangeTooltip(y.self,y.tooltipEl,s),y.self.context.mainElement.removeEventListener("mousemove",x),y.self.context.mainElement.removeEventListener("mouseleave",handleMouseLeave),y.self.context.mainElement.removeEventListener("keydown",handleCancelSelectionDates),y.self.context.mainElement.addEventListener("mousemove",g),y.self.context.mainElement.addEventListener("mouseleave",handleMouseLeave),y.self.context.mainElement.addEventListener("keydown",handleCancelSelectionDates),()=>{y.self.context.mainElement.removeEventListener("mousemove",g),y.self.context.mainElement.removeEventListener("mouseleave",handleMouseLeave),y.self.context.mainElement.removeEventListener("keydown",handleCancelSelectionDates)}),reset:()=>{const[c,d]=[l.context.selectedDates[0],l.context.selectedDates[l.context.selectedDates.length-1]],u=l.context.selectedDates[0]!==l.context.selectedDates[l.context.selectedDates.length-1],m=parseDates([`${c}:${d}`]).filter((s=>!l.context.disableDates.includes(s))),h=u?l.enableEdgeDatesOnly?[c,d]:m:[l.context.selectedDates[0],l.context.selectedDates[0]];if(setContext(l,"selectedDates",h),l.disableDatesGaps&&(setContext(l,"displayDateMin",y.rangeMin),setContext(l,"displayDateMax",y.rangeMax)),y.self.context.mainElement.removeEventListener("mousemove",g),y.self.context.mainElement.removeEventListener("mouseleave",handleMouseLeave),y.self.context.mainElement.removeEventListener("keydown",handleCancelSelectionDates),l.onCreateDateRangeTooltip)return l.context.selectedDates[0]||(y.self.context.mainElement.removeEventListener("mousemove",x),y.self.context.mainElement.removeEventListener("mouseleave",handleMouseLeave),createDateRangeTooltip(y.self,y.tooltipEl,null)),l.context.selectedDates[0]&&(y.self.context.mainElement.addEventListener("mousemove",x),y.self.context.mainElement.addEventListener("mouseleave",handleMouseLeave),createDateRangeTooltip(y.self,y.tooltipEl,s)),()=>{y.self.context.mainElement.removeEventListener("mousemove",x),y.self.context.mainElement.removeEventListener("mouseleave",handleMouseLeave)}}})[1===l.context.selectedDates.length?"set":"reset"]()},updateDateModifier=l=>{l.context.mainElement.querySelectorAll("[data-vc-date]").forEach((s=>{const c=s.querySelector("[data-vc-date-btn]"),d=s.dataset.vcDate,u=getDate(d).getDay();setDateModifier(l,l.context.selectedYear,s,c,u,d,"current")}))},handleClickDate=(l,s)=>{var c;const d=s.target,u=d.closest("[data-vc-date-btn]");if(!l.selectionDatesMode||!["single","multiple","multiple-ranged"].includes(l.selectionDatesMode)||!u)return;const m=u.closest("[data-vc-date]");({single:()=>handleSelectDate(l,m,!1),multiple:()=>handleSelectDate(l,m,!0),"multiple-ranged":()=>handleSelectDateRange(l,m)})[l.selectionDatesMode](),null==(c=l.context.selectedDates)||c.sort(((l,s)=>+new Date(l)-+new Date(s))),l.onClickDate&&l.onClickDate(l,s),l.inputMode&&l.context.inputElement&&l.context.mainElement&&l.onChangeToInput&&l.onChangeToInput(l,s);const h=d.closest('[data-vc-date-month="prev"]'),v=d.closest('[data-vc-date-month="next"]');({prev:()=>l.enableMonthChangeOnDayClick?handleMonth(l,"prev"):updateDateModifier(l),next:()=>l.enableMonthChangeOnDayClick?handleMonth(l,"next"):updateDateModifier(l),current:()=>updateDateModifier(l)})[h?"prev":v?"next":"current"]()},b=["month","year"],getValue=(l,s,c)=>{const{currentValue:d,columnID:u}=getColumnID(l,s);return"month"===l.context.currentType&&u>=0?c-u:"year"===l.context.currentType&&l.context.selectedYear!==d?c-1:c},handleMultipleYearSelection=(l,s)=>{const c=getValue(l,"year",Number(s.dataset.vcYearsYear)),d=getDate(l.context.dateMin),u=getDate(l.context.dateMax),m=l.context.displayMonthsCount-1,{columnID:h}=getColumnID(l,"year"),v=l.context.selectedMonth<d.getMonth()&&c<=d.getFullYear(),p=l.context.selectedMonth>u.getMonth()-m+h&&c>=u.getFullYear(),y=c<d.getFullYear(),g=c>u.getFullYear(),x=v||y?d.getFullYear():p||g?u.getFullYear():c,b=v||y?d.getMonth():p||g?u.getMonth()-m+h:l.context.selectedMonth;setContext(l,"selectedYear",x),setContext(l,"selectedMonth",b)},handleMultipleMonthSelection=(l,s)=>{const c=s.closest('[data-vc-column="month"]').querySelector('[data-vc="year"]'),d=getValue(l,"month",Number(s.dataset.vcMonthsMonth)),u=Number(c.dataset.vcYear),m=getDate(l.context.dateMin),h=getDate(l.context.dateMax),v=d<m.getMonth()&&u<=m.getFullYear(),p=d>h.getMonth()&&u>=h.getFullYear();setContext(l,"selectedYear",u),setContext(l,"selectedMonth",v?m.getMonth():p?h.getMonth():d)},handleItemClick=(l,s,c,d)=>{var u;({year:()=>{if("multiple"===l.type)return handleMultipleYearSelection(l,d);setContext(l,"selectedYear",Number(d.dataset.vcYearsYear))},month:()=>{if("multiple"===l.type)return handleMultipleMonthSelection(l,d);setContext(l,"selectedMonth",Number(d.dataset.vcMonthsMonth))}})[c]();({year:()=>{var c;return null==(c=l.onClickYear)?void 0:c.call(l,l,s)},month:()=>{var c;return null==(c=l.onClickMonth)?void 0:c.call(l,l,s)}})[c](),l.context.currentType!==l.type?(setContext(l,"currentType",l.type),create(l),null==(u=l.context.mainElement.querySelector(`[data-vc="${c}"]`))||u.focus()):setYearModifier(l,d,c,!0,!0)},handleClickType=(l,s,c)=>{var d;const u=s.target,m=u.closest(`[data-vc="${c}"]`),h={year:()=>createYears(l,u),month:()=>createMonths(l,u)};if(m&&l.onClickTitle&&l.onClickTitle(l,s),m&&l.context.currentType!==c)return h[c]();const v=u.closest(`[data-vc-${c}s-${c}]`);if(v)return handleItemClick(l,s,c,v);const p=u.closest('[data-vc="grid"]'),y=u.closest('[data-vc="column"]');(l.context.currentType===c&&m||"multiple"===l.type&&l.context.currentType===c&&p&&!y)&&(setContext(l,"currentType",l.type),create(l),null==(d=l.context.mainElement.querySelector(`[data-vc="${c}"]`))||d.focus())},handleClickMonthOrYear=(l,s)=>{const c={month:l.selectionMonthsMode,year:l.selectionYearsMode};b.forEach((d=>{c[d]&&s.target&&handleClickType(l,s,d)}))},handleClickWeekNumber=(l,s)=>{if(!l.enableWeekNumbers||!l.onClickWeekNumber)return;const c=s.target.closest("[data-vc-week-number]"),d=l.context.mainElement.querySelectorAll("[data-vc-date-week-number]");if(!c||!d[0])return;const u=Number(c.innerText),m=Number(c.dataset.vcWeekYear),h=Array.from(d).filter((l=>Number(l.dataset.vcDateWeekNumber)===u));l.onClickWeekNumber(l,u,m,h,s)},handleClickWeekDay=(l,s)=>{if(!l.onClickWeekDay)return;const c=s.target.closest("[data-vc-week-day]"),d=s.target.closest('[data-vc="column"]'),u=d?d.querySelectorAll("[data-vc-date-week-day]"):l.context.mainElement.querySelectorAll("[data-vc-date-week-day]");if(!c||!u[0])return;const m=Number(c.dataset.vcWeekDay),h=Array.from(u).filter((l=>Number(l.dataset.vcDateWeekDay)===m));l.onClickWeekDay(l,m,h,s)},handleClick=l=>{const t=s=>{handleClickArrow(l,s),handleClickWeekDay(l,s),handleClickWeekNumber(l,s),handleClickDate(l,s),handleClickMonthOrYear(l,s)};return l.context.mainElement.addEventListener("click",t),()=>l.context.mainElement.removeEventListener("click",t)},initMonthsCount=l=>{if("multiple"===l.type&&(l.displayMonthsCount<=1||l.displayMonthsCount>12))throw new Error(h.incorrectMonthsCount);if("multiple"!==l.type&&l.displayMonthsCount>1)throw new Error(h.incorrectMonthsCount);setContext(l,"displayMonthsCount",l.displayMonthsCount?l.displayMonthsCount:"multiple"===l.type?2:1)},getLocalDate=()=>{const l=new Date;return new Date(l.getTime()-6e4*l.getTimezoneOffset()).toISOString().substring(0,10)},resolveDate=(l,s)=>"today"===l?getLocalDate():l instanceof Date||"number"==typeof l||"string"==typeof l?parseDates([l])[0]:s,initRange=l=>{var s,c,d;const u=resolveDate(l.dateMin,l.dateMin),m=resolveDate(l.dateMax,l.dateMax),h=resolveDate(l.displayDateMin,u),v=resolveDate(l.displayDateMax,m);setContext(l,"dateToday",resolveDate(l.dateToday,l.dateToday)),setContext(l,"displayDateMin",h?getDate(u)>=getDate(h)?u:h:u),setContext(l,"displayDateMax",v?getDate(m)<=getDate(v)?m:v:m);const p=l.disableDatesPast&&!l.disableAllDates&&getDate(h)<getDate(l.context.dateToday);setContext(l,"displayDateMin",p||l.disableAllDates?l.context.dateToday:h),setContext(l,"displayDateMax",l.disableAllDates?l.context.dateToday:v),setContext(l,"disableDates",l.disableDates[0]&&!l.disableAllDates?parseDates(l.disableDates):l.disableAllDates?[l.context.displayDateMin]:[]),l.context.disableDates.length>1&&l.context.disableDates.sort(((l,s)=>+new Date(l)-+new Date(s))),setContext(l,"enableDates",l.enableDates[0]?parseDates(l.enableDates):[]),(null==(s=l.context.enableDates)?void 0:s[0])&&(null==(c=l.context.disableDates)?void 0:c[0])&&setContext(l,"disableDates",l.context.disableDates.filter((s=>!l.context.enableDates.includes(s)))),l.context.enableDates.length>1&&l.context.enableDates.sort(((l,s)=>+new Date(l)-+new Date(s))),(null==(d=l.context.enableDates)?void 0:d[0])&&l.disableAllDates&&(setContext(l,"displayDateMin",l.context.enableDates[0]),setContext(l,"displayDateMax",l.context.enableDates[l.context.enableDates.length-1])),setContext(l,"dateMin",l.displayDisabledDates?u:l.context.displayDateMin),setContext(l,"dateMax",l.displayDisabledDates?m:l.context.displayDateMax)},initSelectedDates=l=>{var s;setContext(l,"selectedDates",(null==(s=l.selectedDates)?void 0:s[0])?parseDates(l.selectedDates):[])},setInitialContext=(l,s,c)=>{setContext(l,"selectedMonth",s),setContext(l,"selectedYear",c),setContext(l,"displayYear",c)},initSelectedMonthYear=l=>{var s;if(l.enableJumpToSelectedDate&&(null==(s=l.selectedDates)?void 0:s[0])&&void 0===l.selectedMonth&&void 0===l.selectedYear){const s=getDate(parseDates(l.selectedDates)[0]);return void setInitialContext(l,s.getMonth(),s.getFullYear())}const c=void 0!==l.selectedMonth&&Number(l.selectedMonth)>=0&&Number(l.selectedMonth)<12,d=void 0!==l.selectedYear&&Number(l.selectedYear)>=0&&Number(l.selectedYear)<=9999;setInitialContext(l,c?Number(l.selectedMonth):getDate(l.context.dateToday).getMonth(),d?Number(l.selectedYear):getDate(l.context.dateToday).getFullYear())},initTime=l=>{var s,c,d;if(!l.selectionTimeMode)return;if(![12,24].includes(l.selectionTimeMode))throw new Error(h.incorrectTime);const u=12===l.selectionTimeMode,m=u?/^(0[1-9]|1[0-2]):([0-5][0-9]) ?(AM|PM)?$/i:/^([0-1]?[0-9]|2[0-3]):([0-5][0-9])$/;let[v,p,y]=null!=(d=null==(c=null==(s=l.selectedTime)?void 0:s.match(m))?void 0:c.slice(1))?d:[];v?u&&!y&&(y="AM"):(v=u?transformTime12(String(l.timeMinHour)):String(l.timeMinHour),p=String(l.timeMinMinute),y=u?Number(transformTime12(String(l.timeMinHour)))>=12?"PM":"AM":null),setContext(l,"selectedHours",v.padStart(2,"0")),setContext(l,"selectedMinutes",p.padStart(2,"0")),setContext(l,"selectedKeeping",y),setContext(l,"selectedTime",`${l.context.selectedHours}:${l.context.selectedMinutes}${y?` ${y}`:""}`)},initAllVariables=l=>{setContext(l,"currentType",l.type),initMonthsCount(l),initRange(l),initSelectedMonthYear(l),initSelectedDates(l),initTime(l)},reset=(l,{year:s,month:c,dates:d,time:u,locale:m},h=!0)=>{var v;const p={year:l.selectedYear,month:l.selectedMonth,dates:l.selectedDates,time:l.selectedTime};(l.selectedYear=s?p.year:l.context.selectedYear,l.selectedMonth=c?p.month:l.context.selectedMonth,l.selectedTime=u?p.time:l.context.selectedTime,l.selectedDates="only-first"===d&&(null==(v=l.context.selectedDates)?void 0:v[0])?[l.context.selectedDates[0]]:!0===d?p.dates:l.context.selectedDates,m)&&setContext(l,"locale",{months:{short:[],long:[]},weekdays:{short:[],long:[]}});initAllVariables(l),h&&create(l),l.selectedYear=p.year,l.selectedMonth=p.month,l.selectedDates=p.dates,l.selectedTime=p.time,"multiple-ranged"===l.selectionDatesMode&&d&&handleSelectDateRange(l,null)},createToInput=l=>{const s=document.createElement("div");return s.className=l.styles.calendar,s.dataset.vc="calendar",s.dataset.vcInput="",s.dataset.vcCalendarHidden="",setContext(l,"inputModeInit",!0),setContext(l,"isShowInInputMode",!1),setContext(l,"mainElement",s),document.body.appendChild(l.context.mainElement),reset(l,{year:!0,month:!0,dates:!0,time:!0,locale:!0}),queueMicrotask((()=>show(l))),l.onInit&&l.onInit(l),handleArrowKeys(l),handleClick(l)},handleInput=l=>{setContext(l,"inputElement",l.context.mainElement);const t=()=>{l.context.inputModeInit?queueMicrotask((()=>show(l))):createToInput(l)};return l.context.inputElement.addEventListener("click",t),l.context.inputElement.addEventListener("focus",t),()=>{l.context.inputElement.removeEventListener("click",t),l.context.inputElement.removeEventListener("focus",t)}},init=l=>(setContext(l,"originalElement",l.context.mainElement.cloneNode(!0)),setContext(l,"isInit",!0),l.inputMode?handleInput(l):(initAllVariables(l),create(l),l.onInit&&l.onInit(l),handleArrowKeys(l),handleClick(l))),update=(l,s)=>{if(!l.context.isInit)throw new Error(h.notInit);reset(l,__spreadValues(__spreadValues({},{year:!0,month:!0,dates:!0,time:!0,locale:!0}),s),!(l.inputMode&&!l.context.inputModeInit)),l.onUpdate&&l.onUpdate(l)},replaceProperties=(l,s)=>{const c=Object.keys(s);for(let d=0;d<c.length;d++){const u=c[d];"object"!=typeof l[u]||"object"!=typeof s[u]||s[u]instanceof Date||Array.isArray(s[u])?void 0!==s[u]&&(l[u]=s[u]):replaceProperties(l[u],s[u])}},set=(l,s,c)=>{replaceProperties(l,s),l.context.isInit&&update(l,c)};function findBestPickerPosition(l,s){const c="left";if(!s||!l)return c;const{canShow:d,parentPositions:u}=getAvailablePosition(l,s),m=d.left&&d.right;return(m&&d.bottom?"center":m&&d.top?["top","center"]:Array.isArray(u)?["bottom"===u[0]?"top":"bottom",...u.slice(1)]:u)||c}const setPosition=(l,s,c)=>{if(!l)return;const d="auto"===c?findBestPickerPosition(l,s):c,u={top:-s.offsetHeight,bottom:l.offsetHeight,left:0,center:l.offsetWidth/2-s.offsetWidth/2,right:l.offsetWidth-s.offsetWidth},m=Array.isArray(d)?d[0]:"bottom",h=Array.isArray(d)?d[1]:d;s.dataset.vcPosition=m;const{top:v,left:p}=getOffset(l),y=v+u[m];let g=p+u[h];const{vw:x}=getViewportDimensions();if(g+s.clientWidth>x){const l=window.innerWidth-document.body.clientWidth;g=x-s.clientWidth-l}else g<0&&(g=0);Object.assign(s.style,{left:`${g}px`,top:`${y}px`})},show=l=>{if(l.context.isShowInInputMode)return;if(!l.context.currentType)return void l.context.mainElement.click();setContext(l,"cleanupHandlers",[]),setContext(l,"isShowInInputMode",!0),setPosition(l.context.inputElement,l.context.mainElement,l.positionToInput),l.context.mainElement.removeAttribute("data-vc-calendar-hidden");const t=()=>{setPosition(l.context.inputElement,l.context.mainElement,l.positionToInput)};window.addEventListener("resize",t),l.context.cleanupHandlers.push((()=>window.removeEventListener("resize",t)));const n=s=>{"Escape"===s.key&&hide(l)};document.addEventListener("keydown",n),l.context.cleanupHandlers.push((()=>document.removeEventListener("keydown",n)));const a=s=>{s.target===l.context.inputElement||l.context.mainElement.contains(s.target)||hide(l)};document.addEventListener("click",a,{capture:!0}),l.context.cleanupHandlers.push((()=>document.removeEventListener("click",a,{capture:!0}))),l.onShow&&l.onShow(l)},M={application:"Calendar",navigation:"Calendar Navigation",arrowNext:{month:"Next month",year:"Next list of years"},arrowPrev:{month:"Previous month",year:"Previous list of years"},month:"Select month, current selected month:",months:"List of months",year:"Select year, current selected year:",years:"List of years",week:"Days of the week",weekNumber:"Numbers of weeks in a year",dates:"Dates in the current month",selectingTime:"Selecting a time ",inputHour:"Hours",inputMinute:"Minutes",rangeHour:"Slider for selecting hours",rangeMinute:"Slider for selecting minutes",btnKeeping:"Switch AM/PM, current position:"},f={calendar:"vc",controls:"vc-controls",grid:"vc-grid",column:"vc-column",header:"vc-header",headerContent:"vc-header__content",month:"vc-month",year:"vc-year",arrowPrev:"vc-arrow vc-arrow_prev",arrowNext:"vc-arrow vc-arrow_next",wrapper:"vc-wrapper",content:"vc-content",months:"vc-months",monthsMonth:"vc-months__month",years:"vc-years",yearsYear:"vc-years__year",week:"vc-week",weekDay:"vc-week__day",weekNumbers:"vc-week-numbers",weekNumbersTitle:"vc-week-numbers__title",weekNumbersContent:"vc-week-numbers__content",weekNumber:"vc-week-number",dates:"vc-dates",date:"vc-date",dateBtn:"vc-date__btn",datePopup:"vc-date__popup",dateRangeTooltip:"vc-date-range-tooltip",time:"vc-time",timeContent:"vc-time__content",timeHour:"vc-time__hour",timeMinute:"vc-time__minute",timeKeeping:"vc-time__keeping",timeRanges:"vc-time__ranges",timeRange:"vc-time__range"};class OptionsCalendar{constructor(){__publicField(this,"type","default"),__publicField(this,"inputMode",!1),__publicField(this,"positionToInput","left"),__publicField(this,"firstWeekday",1),__publicField(this,"monthsToSwitch",1),__publicField(this,"themeAttrDetect","html[data-theme]"),__publicField(this,"locale","en"),__publicField(this,"dateToday","today"),__publicField(this,"dateMin","1970-01-01"),__publicField(this,"dateMax","2470-12-31"),__publicField(this,"displayDateMin"),__publicField(this,"displayDateMax"),__publicField(this,"displayDatesOutside",!0),__publicField(this,"displayDisabledDates",!1),__publicField(this,"displayMonthsCount"),__publicField(this,"disableDates",[]),__publicField(this,"disableAllDates",!1),__publicField(this,"disableDatesPast",!1),__publicField(this,"disableDatesGaps",!1),__publicField(this,"disableWeekdays",[]),__publicField(this,"disableToday",!1),__publicField(this,"enableDates",[]),__publicField(this,"enableEdgeDatesOnly",!0),__publicField(this,"enableDateToggle",!0),__publicField(this,"enableWeekNumbers",!1),__publicField(this,"enableMonthChangeOnDayClick",!0),__publicField(this,"enableJumpToSelectedDate",!1),__publicField(this,"selectionDatesMode","single"),__publicField(this,"selectionMonthsMode",!0),__publicField(this,"selectionYearsMode",!0),__publicField(this,"selectionTimeMode",!1),__publicField(this,"selectedDates",[]),__publicField(this,"selectedMonth"),__publicField(this,"selectedYear"),__publicField(this,"selectedHolidays",[]),__publicField(this,"selectedWeekends",[0,6]),__publicField(this,"selectedTime"),__publicField(this,"selectedTheme","system"),__publicField(this,"timeMinHour",0),__publicField(this,"timeMaxHour",23),__publicField(this,"timeMinMinute",0),__publicField(this,"timeMaxMinute",59),__publicField(this,"timeControls","all"),__publicField(this,"timeStepHour",1),__publicField(this,"timeStepMinute",1),__publicField(this,"sanitizerHTML",(l=>l)),__publicField(this,"onClickDate"),__publicField(this,"onClickWeekDay"),__publicField(this,"onClickWeekNumber"),__publicField(this,"onClickTitle"),__publicField(this,"onClickMonth"),__publicField(this,"onClickYear"),__publicField(this,"onClickArrow"),__publicField(this,"onChangeTime"),__publicField(this,"onChangeToInput"),__publicField(this,"onCreateDateRangeTooltip"),__publicField(this,"onCreateDateEls"),__publicField(this,"onCreateMonthEls"),__publicField(this,"onCreateYearEls"),__publicField(this,"onInit"),__publicField(this,"onUpdate"),__publicField(this,"onDestroy"),__publicField(this,"onShow"),__publicField(this,"onHide"),__publicField(this,"popups",{}),__publicField(this,"labels",__spreadValues({},M)),__publicField(this,"layouts",{default:"",multiple:"",month:"",year:""}),__publicField(this,"styles",__spreadValues({},f))}}const D=class e extends OptionsCalendar{constructor(l,s){var c;super(),__publicField(this,"init",(()=>init(this))),__publicField(this,"update",(l=>update(this,l))),__publicField(this,"destroy",(()=>destroy(this))),__publicField(this,"show",(()=>show(this))),__publicField(this,"hide",(()=>hide(this))),__publicField(this,"set",((l,s)=>set(this,l,s))),__publicField(this,"context"),this.context=__spreadProps(__spreadValues({},this.context),{locale:{months:{short:[],long:[]},weekdays:{short:[],long:[]}}}),setContext(this,"mainElement","string"==typeof l?null!=(c=e.memoizedElements.get(l))?c:this.queryAndMemoize(l):l),s&&replaceProperties(this,s)}queryAndMemoize(l){const s=document.querySelector(l);if(!s)throw new Error(h.notFoundSelector(l));return e.memoizedElements.set(l,s),s}};__publicField(D,"memoizedElements",new Map);let w=D;export{w as Calendar};

